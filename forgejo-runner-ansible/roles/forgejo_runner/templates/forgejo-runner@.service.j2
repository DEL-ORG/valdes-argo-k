[Unit]
Description=Forgejo Actions Runner (instance %i)
After=network.target docker.service
Wants=docker.service

[Service]
Type=simple
User=%i
Group=%i
WorkingDirectory=/home/%i
# ExecStart runs the runner in daemon mode. The runner binary must be installed at configured path.
ExecStart={{ forgejo_runner__full_executable_path }} daemon
Restart=always
RestartSec=10s
Environment=PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/bin
# Add a small memory limit fallback (optional)
#MemoryLimit=1G

StandardOutput=journal
StandardError=journal

[Install]
WantedBy=multi-user.target
